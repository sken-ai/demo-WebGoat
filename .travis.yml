services:
  - docker
language: java
jdk:
  - openjdk11
  - openjdk13
install: "/bin/true"
addons:
  apt:
    packages:
      - python3-pip
      - python3-setuptools
before_install:
  - pip3 install --upgrade --no-cache-dir --default-timeout=210 skencli
script:
  - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH;
    else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, PR=$PR, BRANCH=$BRANCH"
  - if [ ! -z "${TRAVIS_TAG}" ]; then mvn versions:set -DnewVersion=${TRAVIS_TAG:1};
    fi
  - mvn clean install -q
  - skencli
cache:
  directories:
    - "$HOME/.m2"
